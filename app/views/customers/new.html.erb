<div class="row">
  <div class="col-xs-12">
    <h1 class="page-header">
      Novo <small>Cliente</small>
    </h1>
  </div>
</div>

<% if flash[:error] %>
  <div class="alert hidden-print alert-danger alert-dismissable">
    <% flash[:error].each do |msg| %>
      <p><i class="fa fa-warning"></i>  <%= msg %></p>
    <% end %>
  </div>
<% end %>

<%= form_for @customer, url: {action: "create"} do |f| %>

  <div class="row">
    <div class="col-xs-12">
        <div class="form-group <%= 'has-error has-feedback' if @customer.errors[:first_name].present? %>">
        <label>Nome*</label>
        <%= f.text_field :first_name, class: "form-control" %>
        <% if @customer.errors[:first_name].present? %>
          <span class="form-control-feedback">
            <i class="fa fa-warning"></i>
          </span>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
        <div class="form-group <%= 'has-error has-feedback' if @customer.errors[:last_name].present? %>">
        <label>Sobrenome*</label>
        <%= f.text_field :last_name, class: "form-control" %>
        <% if @customer.errors[:last_name].present? %>
          <span class="form-control-feedback">
            <i class="fa fa-warning"></i>
          </span>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
        <div class="form-group <%= 'has-error has-feedback' if @customer.errors[:phone].present? %>">
        <label>Telefone</label>
        <%= f.text_field :phone, class: "form-control", id: 'phone' %>
        <% if @customer.errors[:phone].present? %>
          <span class="form-control-feedback">
            <i class="fa fa-warning"></i>
          </span>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
        <div class="form-group <%= 'has-error has-feedback' if @customer.errors[:email].present? %>">
        <label>E-mail*</label>
        <%= f.text_field :email, class: "form-control" %>
        <% if @customer.errors[:email].present? %>
          <span class="form-control-feedback">
            <i class="fa fa-warning"></i>
          </span>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <div class="form-group">
        <%= f.submit "Criar", class: "btn btn-success" %>
        <%= link_to 'Cancelar', customers_path, class: "btn btn-secondary" %>
      </div>
    </div>
  </div>

<% end %>

<script>
  var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
  var tel = document.querySelector('#phone');
  VMasker(tel).maskPattern(telMask[0]);
</script>
